# Mobile Apps for Notion-Style Workspace

**Complete guide to mobile access for your Odoo 18 Notion-style workspace**

---

## üì± Overview

Your Notion-style workspace supports **two mobile approaches**:

| Approach | Setup Time | Features | Best For |
|----------|-----------|----------|----------|
| **PWA (Progressive Web App)** | 5 min | 80% native feel | Quick deployment |
| **Flutter Native App** | 2-3 days | 100% native + offline | Production apps |

Both approaches give full access to:
- ‚úÖ Kanban task board
- ‚úÖ Calendar events
- ‚úÖ Evidence repository (DMS)
- ‚úÖ Knowledge base (wiki)
- ‚úÖ Chatter messaging
- ‚úÖ File attachments

---

## üéØ Comparison: PWA vs Native App

### Progressive Web App (PWA)

**Advantages:**
- ‚úÖ **Instant deployment** - No app store submission
- ‚úÖ **Auto-updates** - Users always on latest version
- ‚úÖ **Cross-platform** - Works on iOS, Android, desktop
- ‚úÖ **No installation needed** - Runs in browser
- ‚úÖ **Small size** - ~1-2 MB
- ‚úÖ **Single codebase** - Same as web version

**Limitations:**
- ‚ö†Ô∏è Limited offline support (browser cache only)
- ‚ö†Ô∏è No native push notifications on iOS
- ‚ö†Ô∏è Reduced hardware access (camera, biometrics)
- ‚ö†Ô∏è Must have network for initial load

**When to use:**
- Quick deployment needed
- Users already familiar with web interface
- Limited development resources
- Don't need deep OS integration

### Flutter Native App

**Advantages:**
- ‚úÖ **Full native performance** - Compiled to native code
- ‚úÖ **Complete offline mode** - Local database with sync
- ‚úÖ **Native push notifications** - iOS + Android
- ‚úÖ **Full hardware access** - Camera, biometrics, GPS
- ‚úÖ **App store presence** - Professional image
- ‚úÖ **Better UX** - Native navigation, gestures

**Limitations:**
- ‚ö†Ô∏è Development time (2-3 days initial setup)
- ‚ö†Ô∏è App store approval process (1-2 weeks)
- ‚ö†Ô∏è Must maintain separate codebase
- ‚ö†Ô∏è Updates require app store review

**When to use:**
- Production deployment
- Need offline access
- Want app store presence
- Professional/enterprise use case

---

## üöÄ Option 1: PWA Setup (5 minutes)

### **What You Get**

A progressive web app that:
- Installs to home screen like native app
- Works offline (cached pages)
- Full-screen mode
- Responsive mobile UI
- Fast loading

### **Prerequisites**

Already installed in your workspace setup:
```python
# OCA modules (already installed)
'web_pwa_oca'       # PWA support
'web_responsive'    # Mobile-responsive UI
'web_notify'        # Toast notifications
```

### **Step 1: Enable PWA**

SSH into your server:

```bash
ssh root@188.166.237.231

# Verify PWA module is installed
docker exec -i odoo18 odoo shell -d odoo_production << 'ODOO_SHELL'
pwa_module = env['ir.module.module'].search([('name', '=', 'web_pwa_oca')])
print(f"PWA Module: {pwa_module.state}")
exit()
ODOO_SHELL
```

**Expected output:** `PWA Module: installed`

### **Step 2: Configure PWA Settings**

```bash
docker exec -i odoo18 odoo shell -d odoo_production << 'ODOO_SHELL'
# Update PWA configuration
IrConfigParam = env['ir.config_parameter']

# PWA settings
IrConfigParam.set_param('web_pwa.manifest_name', 'Compliance Workspace')
IrConfigParam.set_param('web_pwa.manifest_short_name', 'Compliance')
IrConfigParam.set_param('web_pwa.manifest_description', 'Notion-style workspace for compliance and project management')
IrConfigParam.set_param('web_pwa.manifest_background_color', '#FFFFFF')
IrConfigParam.set_param('web_pwa.manifest_theme_color', '#875A7B')
IrConfigParam.set_param('web_pwa.manifest_start_url', '/web')
IrConfigParam.set_param('web_pwa.manifest_icon_url', '/web/static/img/logo.png')

env.cr.commit()
print("‚úì PWA configured")
exit()
ODOO_SHELL
```

### **Step 3: Install on Mobile Device**

**iOS (Safari):**
1. Open **https://insightpulseai.net:8069** in Safari
2. Tap the **Share** button (square with arrow)
3. Scroll and tap **"Add to Home Screen"**
4. Name it "Compliance Workspace"
5. Tap **Add**
6. Icon appears on home screen

**Android (Chrome):**
1. Open **https://insightpulseai.net:8069** in Chrome
2. Tap the **three dots** menu
3. Tap **"Add to Home screen"**
4. Name it "Compliance Workspace"
5. Tap **Add**
6. Icon appears on home screen

### **Step 4: Verify PWA Features**

Once installed:
- ‚úÖ Opens in full-screen (no browser bar)
- ‚úÖ Has custom icon on home screen
- ‚úÖ Splash screen on launch
- ‚úÖ Works offline (cached pages)
- ‚úÖ Responsive mobile layout

### **PWA Features Available**

| Feature | iOS Safari | Android Chrome |
|---------|------------|----------------|
| **Home screen icon** | ‚úÖ | ‚úÖ |
| **Full-screen mode** | ‚úÖ | ‚úÖ |
| **Offline cache** | ‚úÖ | ‚úÖ |
| **Push notifications** | ‚ùå | ‚úÖ |
| **Background sync** | ‚ùå | ‚úÖ |
| **Add to homescreen prompt** | Manual | Auto |

---

## üèóÔ∏è Option 2: Flutter Native App

### **Architecture Overview**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     FLUTTER APP (DART)                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  Presentation  ‚îÇ  ‚îÇ  State Mgmt    ‚îÇ  ‚îÇ  Services    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  (UI Screens)  ‚îÇ  ‚îÇ  (Providers)   ‚îÇ  ‚îÇ  (API/DB)    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ         ‚Üì                   ‚Üì                    ‚Üì          ‚îÇ
‚îÇ  ‚Ä¢ Login Screen      ‚Ä¢ AuthProvider       ‚Ä¢ OdooService    ‚îÇ
‚îÇ  ‚Ä¢ Dashboard         ‚Ä¢ ProjectProvider    ‚Ä¢ CacheService   ‚îÇ
‚îÇ  ‚Ä¢ Tasks Kanban      ‚Ä¢ TaskProvider       ‚Ä¢ NotifService   ‚îÇ
‚îÇ  ‚Ä¢ Task Detail       ‚Ä¢ ChatProvider       ‚Ä¢ FileService    ‚îÇ
‚îÇ  ‚Ä¢ Calendar          ‚Ä¢ UserProvider       ‚Ä¢ SyncService    ‚îÇ
‚îÇ  ‚Ä¢ Knowledge Pages   ‚Ä¢ CalendarProvider                    ‚îÇ
‚îÇ  ‚Ä¢ Documents         ‚Ä¢ DocumentProvider                    ‚îÇ
‚îÇ  ‚Ä¢ Profile                                                  ‚îÇ
‚îÇ                                                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                     DATA LAYER                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ   Models     ‚îÇ  ‚îÇ  Local DB    ‚îÇ  ‚îÇ  API Client      ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ  ‚Ä¢ Task          ‚îÇ  ‚Ä¢ Hive          ‚îÇ  ‚Ä¢ odoo_rpc          ‚îÇ
‚îÇ  ‚Ä¢ Project       ‚îÇ  ‚Ä¢ SQLite        ‚îÇ  ‚Ä¢ JSON-RPC          ‚îÇ
‚îÇ  ‚Ä¢ User          ‚îÇ  ‚Ä¢ Cache         ‚îÇ  ‚Ä¢ HTTP/HTTPS        ‚îÇ
‚îÇ  ‚Ä¢ Message       ‚îÇ                  ‚îÇ  ‚Ä¢ WebSocket         ‚îÇ
‚îÇ  ‚Ä¢ Document      ‚îÇ                  ‚îÇ                      ‚îÇ
‚îÇ  ‚Ä¢ Event         ‚îÇ                  ‚îÇ                      ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üï
                    ODOO 18 JSON-RPC API
                 (insightpulseai.net:8069)
```

### **Component Breakdown**

#### **1. Screens (UI Layer)**

| Screen | Purpose | Odoo Models |
|--------|---------|-------------|
| **LoginScreen** | Email/password auth | res.users |
| **DashboardScreen** | Overview, recent tasks | project.task, calendar.event |
| **ProjectsScreen** | Project list | project.project |
| **TasksScreen** | Kanban board | project.task, project.task.type |
| **TaskDetailScreen** | Task details + chatter | project.task, mail.message |
| **CalendarScreen** | Events calendar | calendar.event |
| **KnowledgeScreen** | Wiki pages | document.page |
| **DocumentsScreen** | File repository | dms.document, dms.directory |
| **ProfileScreen** | User settings | res.users |

#### **2. Services (Business Logic)**

**OdooService** (`lib/services/odoo_service.dart`)
- JSON-RPC communication with Odoo
- Authentication and session management
- CRUD operations (create, read, update, delete)
- Search and filtering
- Chatter messaging
- File uploads

**Key Methods:**
```dart
// Authentication
Future<OdooSession> authenticate(String email, String password)
Future<void> logout()

// Generic CRUD
Future<List<Map>> searchRead(String model, {domain, fields, limit})
Future<int> create(String model, Map<String, dynamic> values)
Future<bool> write(String model, List<int> ids, Map values)
Future<bool> unlink(String model, List<int> ids)

// Chatter
Future<int> postMessage(String model, int recordId, String body)
Future<List<Map>> getMessages(String model, int recordId)

// Files
Future<int> uploadAttachment(String model, int recordId, String fileName, bytes)
```

**CacheService** (`lib/services/cache_service.dart`)
- Local data persistence with Hive
- Offline mode support
- Cache expiry management
- Sync queue for offline changes

**NotificationService** (`lib/services/notification_service.dart`)
- Firebase Cloud Messaging integration
- Local notifications
- Deep linking from notifications

**SyncService** (`lib/services/sync_service.dart`)
- Background sync
- Conflict resolution
- Queue offline changes

#### **3. State Management (Providers)**

**AuthProvider**
```dart
class AuthProvider extends ChangeNotifier {
  OdooSession? _session;
  User? _currentUser;
  bool _isAuthenticated = false;

  Future<void> login(String email, String password);
  Future<void> logout();
  Future<void> checkSavedSession();
}
```

**TaskProvider**
```dart
class TaskProvider extends ChangeNotifier {
  List<Task> _tasks = [];
  Map<int, List<Task>> _tasksByStage = {};

  Future<void> loadTasks(int projectId);
  Future<void> createTask(Map<String, dynamic> values);
  Future<void> updateTask(int taskId, Map values);
  Future<void> moveTask(int taskId, int newStageId);
  Future<void> deleteTask(int taskId);
}
```

**ChatProvider**
```dart
class ChatProvider extends ChangeNotifier {
  List<Message> _messages = [];
  List<User> _mentionableUsers = [];

  Future<void> loadMessages(String model, int recordId);
  Future<void> sendMessage(String body, List<int> mentionedUserIds);
  Future<void> uploadFile(File file);
}
```

#### **4. Data Models**

**Task Model** (`lib/models/task.dart`)
```dart
class Task {
  final int id;
  final String name;
  final String? description;
  final int projectId;
  final String projectName;
  final int? stageId;
  final String? stageName;
  final int? userId;
  final DateTime? dateDeadline;
  final String priority;
  final List<String> tagNames;

  // Custom fields from Notion workspace
  final String? evidenceUrl;        // x_evidence_url
  final String? complianceArea;     // x_area
  final int? knowledgePageId;       // x_knowledge_page_id
  final String? approvalStatus;     // x_approval_status

  Task.fromOdoo(Map<String, dynamic> json);
  Map<String, dynamic> toOdoo();
}
```

**Document Model** (`lib/models/document.dart`)
```dart
class Document {
  final int id;
  final String name;
  final int directoryId;
  final String? url;
  final String? mimetype;
  final List<String> tagNames;
  final int? ownerId;

  // Custom fields
  final int? taskId;               // x_task_id
  final String? complianceArea;    // x_compliance_area

  Document.fromOdoo(Map<String, dynamic> json);
}
```

**KnowledgePage Model** (`lib/models/knowledge_page.dart`)
```dart
class KnowledgePage {
  final int id;
  final String name;
  final int? parentId;
  final String content;            // HTML content
  final List<String> tagNames;
  final String? summary;

  // Custom fields
  final List<int> relatedTaskIds;  // x_task_ids
  final String? pageType;          // x_page_type

  KnowledgePage.fromOdoo(Map<String, dynamic> json);
}
```

### **App Features**

#### **1. Task Management**

**Kanban Board:**
- Drag-and-drop between stages
- Color-coded tags
- Priority indicators
- Assignee avatars
- Due date badges (red if overdue)
- Message count badges

```dart
// Move task to new stage
await taskProvider.moveTask(taskId, newStageId);
```

**Task Details:**
- Full description (HTML)
- Chatter messages
- File attachments
- Related evidence documents
- Linked knowledge pages
- Activity timeline

**Quick Actions:**
- Mark as done
- Assign to me
- Set deadline
- Add tags
- @mention team members

#### **2. Calendar Integration**

**Features:**
- Month/week/day views
- Regulatory deadlines highlighted
- Color-coded by event type
- Add to device calendar
- Reminders/alarms

**Event Types:**
- Tax Deadlines (red)
- Finance Meetings (blue)
- Procurement (green)
- Statutory Deadlines (orange)
- Board Meetings (purple)

#### **3. Evidence Repository (DMS)**

**Browse Documents:**
- Folder tree navigation
- Search by name/tags
- Filter by compliance area
- Sort by date/name/type

**Document Actions:**
- View (PDF, images inline)
- Download
- Share externally
- Link to tasks
- Add tags

**Upload Files:**
- Take photo (camera)
- Select from gallery
- Pick from files
- Automatic OCR (if enabled)

#### **4. Knowledge Base (Wiki)**

**Browse Pages:**
- Tree navigation
- Search full-text
- Filter by tags/type
- Recent pages
- Favorites

**Page Display:**
- Rendered HTML
- Code syntax highlighting
- Tables, lists, images
- Internal links
- Related tasks shown

**Page Actions:**
- Edit (rich text editor)
- Create sub-page
- Add to favorites
- Share link
- Print/export

#### **5. Chatter & Messaging**

**Features:**
- @mention users (autocomplete)
- Reply to messages
- Like/react
- File attachments
- Push notifications
- Read receipts (if mail_tracking installed)

**@Mention Implementation:**
```dart
class MentionInput extends StatefulWidget {
  final Function(String message, List<int> mentionedUsers) onSend;

  @override
  Widget build(BuildContext context) {
    return TextField(
      controller: _controller,
      decoration: InputDecoration(
        hintText: 'Type @ to mention...',
      ),
      onChanged: (text) {
        // Detect @mention trigger
        if (text.endsWith('@')) {
          _showUserSelector();
        }
      },
    );
  }

  void _showUserSelector() {
    // Show bottom sheet with user list
    showModalBottomSheet(
      context: context,
      builder: (context) => UserSelectorSheet(
        onUserSelected: (user) {
          _insertMention(user);
        },
      ),
    );
  }
}
```

#### **6. Offline Mode**

**What Works Offline:**
- ‚úÖ View cached tasks
- ‚úÖ View cached documents
- ‚úÖ View knowledge pages
- ‚úÖ Create new tasks (queued)
- ‚úÖ Edit existing tasks (queued)
- ‚úÖ Write chatter messages (queued)
- ‚úÖ View calendar events

**Sync Strategy:**
```dart
class SyncService {
  Future<void> syncWhenOnline() async {
    if (!await _hasInternet()) return;

    // 1. Upload queued changes
    await _uploadQueuedChanges();

    // 2. Download server updates
    await _downloadUpdates();

    // 3. Resolve conflicts
    await _resolveConflicts();

    // 4. Update local cache
    await _updateCache();
  }

  Future<void> _uploadQueuedChanges() async {
    final queue = await _db.getQueuedChanges();
    for (final change in queue) {
      try {
        await _executeChange(change);
        await _db.markAsSynced(change.id);
      } catch (e) {
        // Keep in queue, retry later
        await _db.incrementRetryCount(change.id);
      }
    }
  }
}
```

#### **7. Push Notifications**

**Notification Types:**
- Task assigned to you
- @mentioned in chatter
- Task deadline approaching
- Approval request
- Task overdue

**Setup (Firebase):**
```dart
class NotificationService {
  Future<void> initialize() async {
    // Request permission
    await FirebaseMessaging.instance.requestPermission();

    // Get FCM token
    final token = await FirebaseMessaging.instance.getToken();

    // Save to Odoo (user preferences)
    await odooService.write('res.users', [userId], {
      'x_fcm_token': token,
    });

    // Handle foreground notifications
    FirebaseMessaging.onMessage.listen((message) {
      _showLocalNotification(message);
    });

    // Handle notification tap
    FirebaseMessaging.onMessageOpenedApp.listen((message) {
      _handleNotificationTap(message);
    });
  }
}
```

### **File Structure**

```
mobile-app/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ main.dart
‚îÇ   ‚îú‚îÄ‚îÄ app.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ odoo_config.dart           # Odoo server settings
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ theme.dart                 # App theme/colors
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants.dart             # App constants
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ odoo_service.dart          # ‚úÖ Odoo RPC client
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_service.dart          # Authentication
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache_service.dart         # Offline cache
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sync_service.dart          # Background sync
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notification_service.dart  # Push notifications
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ file_service.dart          # File upload/download
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task.dart                  # Task data model
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ project.dart               # Project model
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.dart                  # User model
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message.dart               # Chatter message
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document.dart              # DMS document
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge_page.dart        # Knowledge page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar_event.dart        # Calendar event
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stage.dart                 # Task stage
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_provider.dart         # Auth state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ project_provider.dart      # Projects state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ task_provider.dart         # Tasks state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_provider.dart         # Chatter state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document_provider.dart     # Documents state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge_provider.dart    # Knowledge pages state
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar_provider.dart     # Calendar state
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user_provider.dart         # User state
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login_screen.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ splash_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dashboard_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects_screen.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ project_detail_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tasks_screen.dart      # Kanban board
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ task_detail_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ calendar/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ calendar_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ knowledge_screen.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page_detail_screen.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ documents_screen.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ document_viewer_screen.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ profile_screen.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ widgets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kanban/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kanban_card.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kanban_column.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kanban_board.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chatter/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chatter_widget.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ message_item.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mention_input.dart
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loading_indicator.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error_widget.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ empty_state.dart
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ search_bar.dart
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ files/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ file_upload_widget.dart
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ file_picker_widget.dart
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ date_utils.dart            # Date formatting
‚îÇ       ‚îú‚îÄ‚îÄ color_utils.dart           # Color helpers
‚îÇ       ‚îú‚îÄ‚îÄ validators.dart            # Form validation
‚îÇ       ‚îî‚îÄ‚îÄ html_renderer.dart         # HTML to Flutter widgets
‚îÇ
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo.png
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ splash.png
‚îÇ   ‚îî‚îÄ‚îÄ icons/
‚îÇ       ‚îî‚îÄ‚îÄ app_icon.png
‚îÇ
‚îú‚îÄ‚îÄ android/                           # Android config
‚îú‚îÄ‚îÄ ios/                               # iOS config
‚îú‚îÄ‚îÄ test/                              # Tests
‚îú‚îÄ‚îÄ pubspec.yaml                       # ‚úÖ Dependencies
‚îî‚îÄ‚îÄ README.md
```

### **Dependencies** (pubspec.yaml)

```yaml
dependencies:
  # Core
  flutter:
    sdk: flutter

  # Odoo API
  odoo_rpc: ^0.5.0                    # ‚úÖ Odoo RPC client

  # State Management
  provider: ^6.1.1                    # ‚úÖ State management

  # HTTP & Networking
  http: ^1.1.0
  dio: ^5.4.0

  # Local Storage
  shared_preferences: ^2.2.2          # Simple key-value
  hive: ^2.2.3                        # ‚úÖ NoSQL database
  hive_flutter: ^1.1.0

  # UI Components
  cached_network_image: ^3.3.1        # Image caching
  flutter_slidable: ^3.0.1            # Swipe actions
  pull_to_refresh: ^2.0.0             # Pull-to-refresh
  flutter_spinkit: ^5.2.0             # Loading animations

  # Files & Media
  image_picker: ^1.0.7                # Camera/gallery
  file_picker: ^6.1.1                 # File selection
  path_provider: ^2.1.2               # File paths

  # Push Notifications
  firebase_core: ^2.24.2              # Firebase SDK
  firebase_messaging: ^14.7.10        # FCM
  flutter_local_notifications: ^16.3.2 # Local notifs

  # Rich Text
  flutter_markdown: ^0.6.18           # Markdown rendering
  flutter_quill: ^9.0.0               # Rich text editor
  flutter_html: ^3.0.0                # HTML rendering

  # Utilities
  intl: ^0.18.1                       # Internationalization
  uuid: ^4.3.3                        # UUID generation
  logger: ^2.0.2                      # Logging
```

---

## üéØ Mobile App Features for Notion Workspace

### **Tasks & Projects**

| Feature | PWA | Native | Notes |
|---------|-----|--------|-------|
| View Kanban board | ‚úÖ | ‚úÖ | |
| Drag-and-drop | ‚úÖ | ‚úÖ | |
| Create task | ‚úÖ | ‚úÖ | |
| Edit task | ‚úÖ | ‚úÖ | |
| Assign users | ‚úÖ | ‚úÖ | |
| Set deadlines | ‚úÖ | ‚úÖ | |
| Add tags | ‚úÖ | ‚úÖ | |
| Filter/search | ‚úÖ | ‚úÖ | |
| Link evidence | ‚úÖ | ‚úÖ | Custom field: x_evidence_url |
| Link knowledge | ‚úÖ | ‚úÖ | Custom field: x_knowledge_page_id |
| Approval workflow | ‚úÖ | ‚úÖ | Custom field: x_approval_status |
| Offline create | ‚ùå | ‚úÖ | Queue for sync |
| Offline edit | ‚ùå | ‚úÖ | Queue for sync |

### **Calendar**

| Feature | PWA | Native | Notes |
|---------|-----|--------|-------|
| View calendar | ‚úÖ | ‚úÖ | Month/week/day |
| Regulatory deadlines | ‚úÖ | ‚úÖ | BIR, SSS, etc. |
| Add event | ‚úÖ | ‚úÖ | |
| Edit event | ‚úÖ | ‚úÖ | |
| Add attendees | ‚úÖ | ‚úÖ | |
| Set reminders | ‚úÖ | ‚úÖ | |
| Sync to device | ‚ùå | ‚úÖ | iOS/Android calendar |
| Push reminders | ‚ùå | ‚úÖ | Firebase |

### **Evidence Repository (DMS)**

| Feature | PWA | Native | Notes |
|---------|-----|--------|-------|
| Browse folders | ‚úÖ | ‚úÖ | |
| Search documents | ‚úÖ | ‚úÖ | |
| View PDF | ‚úÖ | ‚úÖ | Inline viewer |
| View images | ‚úÖ | ‚úÖ | |
| Upload files | ‚úÖ | ‚úÖ | |
| Take photo | ‚ö†Ô∏è | ‚úÖ | Limited on PWA |
| Download | ‚úÖ | ‚úÖ | |
| Tag documents | ‚úÖ | ‚úÖ | |
| Link to tasks | ‚úÖ | ‚úÖ | Custom field: x_task_id |
| Offline view | ‚ö†Ô∏è | ‚úÖ | Cached files |

### **Knowledge Base**

| Feature | PWA | Native | Notes |
|---------|-----|--------|-------|
| Browse pages | ‚úÖ | ‚úÖ | |
| View page | ‚úÖ | ‚úÖ | HTML rendering |
| Search pages | ‚úÖ | ‚úÖ | |
| Create page | ‚úÖ | ‚úÖ | |
| Edit page | ‚úÖ | ‚úÖ | Rich text editor |
| View related tasks | ‚úÖ | ‚úÖ | Custom field: x_task_ids |
| Page types | ‚úÖ | ‚úÖ | SOP, guide, policy, etc. |
| Offline view | ‚ö†Ô∏è | ‚úÖ | Cached pages |

### **Chatter & Messaging**

| Feature | PWA | Native | Notes |
|---------|-----|--------|-------|
| View messages | ‚úÖ | ‚úÖ | |
| Post message | ‚úÖ | ‚úÖ | |
| @mention users | ‚úÖ | ‚úÖ | Autocomplete |
| File attachments | ‚úÖ | ‚úÖ | |
| Email notifications | ‚úÖ | ‚úÖ | Via Odoo |
| Push notifications | ‚ùå | ‚úÖ | Firebase FCM |
| Read receipts | ‚úÖ | ‚úÖ | If mail_tracking installed |
| Typing indicator | ‚ùå | ‚úÖ | WebSocket required |

---

## üöÄ Quick Start

### **PWA (5 minutes)**

1. **Verify module installed:**
```bash
ssh root@188.166.237.231
docker exec -i odoo18 odoo shell -d odoo_production << 'ODOO_SHELL'
pwa = env['ir.module.module'].search([('name', '=', 'web_pwa_oca')])
print(f"Status: {pwa.state}")
exit()
ODOO_SHELL
```

2. **Open on mobile:** https://insightpulseai.net:8069

3. **Install to home screen** (instructions above)

4. **Done!** Use like native app

### **Flutter App (First Time Setup)**

1. **Install Flutter:**
```bash
brew install flutter
flutter doctor
```

2. **Clone and setup:**
```bash
cd /path/to/odoboo-workspace/mobile-app
flutter pub get
```

3. **Configure Odoo connection:**
```dart
// Edit lib/config/odoo_config.dart
static const String baseUrl = 'https://insightpulseai.net:8069';
static const String database = 'odoo_production';
```

4. **Run on device:**
```bash
# iOS
flutter run -d ios

# Android
flutter run -d android
```

5. **Login:**
- Email: your-email@company.com
- Password: your-odoo-password

---

## üì± Recommended Approach

**For immediate deployment:** Use PWA
- ‚úÖ Ready now (already installed)
- ‚úÖ No development needed
- ‚úÖ Works on all devices
- ‚úÖ Auto-updates

**For production deployment:** Build Flutter app
- ‚úÖ Better performance
- ‚úÖ Full offline support
- ‚úÖ Professional appearance
- ‚úÖ App store presence

**Hybrid approach:**
1. **Week 1:** Deploy PWA for immediate mobile access
2. **Month 1:** Develop Flutter app in parallel
3. **Month 2:** Test Flutter app with pilot users
4. **Month 3:** Release to app stores
5. **Ongoing:** Maintain both (users can choose)

---

## üìö Additional Resources

- **PWA Module Docs:** https://github.com/OCA/web/tree/18.0/web_pwa_oca
- **Flutter Guide:** `/docs/FLUTTER_MOBILE_APP_GUIDE.md`
- **Mobile Setup:** `/docs/MOBILE_APP_SUPPORT.md`
- **Odoo RPC:** https://pub.dev/packages/odoo_rpc

---

## ‚úÖ Summary

You have **two mobile options** ready to deploy:

**Option 1: PWA** ‚úÖ Already installed, use immediately
**Option 2: Flutter** üöß 2-3 days development, production-ready

Both give full access to your Notion-style workspace:
- ‚úÖ Kanban tasks
- ‚úÖ Calendar events
- ‚úÖ Evidence repository
- ‚úÖ Knowledge base
- ‚úÖ Chatter messaging

**Ready to use now:** Open **https://insightpulseai.net:8069** on your phone!
