<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Scheduled Action: Auto-process pending OCR requests -->
    <record id="ir_cron_auto_process_ocr" model="ir.cron">
        <field name="name">Auto-Process Pending OCR Requests</field>
        <field name="model_id" ref="model_hr_expense"/>
        <field name="state">code</field>
        <field name="code">
expenses = env['hr.expense'].search([('ocr_status', '=', 'pending'), ('attachment_ids', '!=', False)], limit=50)
for expense in expenses:
    try:
        expense.action_process_ocr()
    except Exception as e:
        _logger.error(f"Auto OCR failed for expense {expense.id}: {str(e)}")
        </field>
        <field name="interval_number">15</field>
        <field name="interval_type">minutes</field>
        <field name="numbercall">-1</field>
        <field name="active" eval="False"/>
    </record>
</odoo>
